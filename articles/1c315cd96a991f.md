---
title: "ã‚°ãƒ©ãƒ•ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®åŸºç¤ã‚’å­¦ã¶ãƒ¼BFSã¨DFS"
emoji: "ğŸ”"
type: "tech"
topics:
  - "algorithm"
  - "graph"
  - "bfs"
  - "dfs"
published: true
published_at: "2023-05-06 22:52"
---

ã“ã®è¨˜äº‹ã¯ã€ã‚°ãƒ©ãƒ•ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚·ãƒªãƒ¼ã‚ºã®2ç•ªç›®ã®è¨˜äº‹ã§ã™ã€‚

1. [æ¦‚å¿µã¨è¡¨ç¾æ–¹æ³•](https://zenn.dev/convers39/articles/9b66f263e335d8)
2. BFSã¨DFSâ†’ç¾åœ¨åœ°
3. [UnionFind](https://zenn.dev/convers39/articles/ffd666639e7782)
4. [æœ€å°å…¨åŸŸæœ¨](https://zenn.dev/convers39/articles/6126e22dd116fb)
5. [å˜ä¸€å§‹ç‚¹æœ€çŸ­çµŒè·¯å•é¡Œ](https://zenn.dev/convers39/articles/ce647d26effbac)
6. å…¨ç‚¹å¯¾æœ€çŸ­çµŒè·¯å•é¡Œï¼ˆWIPï¼‰

![](https://storage.googleapis.com/zenn-user-upload/5e7f33f33fe4-20230506.png)

---

## ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ¢ãƒ‡ãƒ«

ä»Šå›ã¯ã‚°ãƒ©ãƒ•ã®ãƒ‡ãƒ¼ã‚¿ã®æ¢ç´¢æ–¹æ³•ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã™ã€‚æ¢ç´¢æ–¹æ³•ã¯æ¦‚ã­2ã¤ã«åˆ†ã‘ã‚‰ã‚Œã¾ã™ã€‚

- å¹…å„ªå…ˆæ¢ç´¢ï¼ˆBFS: Breadth-First Searchï¼‰ã€æ¢ç´¢ã®ãƒ¬ãƒ™ãƒ«ã¨ã®æ¦‚å¿µã‚’ç”¨ã„ã¦ã€ãƒãƒ¼ãƒ‰ã«éš£æ¥ã™ã‚‹å…¨ã¦ã®ãƒãƒ¼ãƒ‰ã‚’å„ªå…ˆçš„ã«æ¢ç´¢ã™ã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/1881450a6517-20230505.gif)
BFSãƒ¡ãƒ³ã‚¿ãƒ«ãƒ¢ãƒ‡ãƒ«ï¼ˆ[å‡ºå…¸](https://commons.wikimedia.org/wiki/File:Breadth-First-Search-Algorithm.gif)ï¼‰


- æ·±ã•å„ªå…ˆæ¢ç´¢ï¼ˆDFS: Depth-First Searchï¼‰ã€å¹…å„ªå…ˆã¨é•ã„ã€ãƒãƒ¼ãƒ‰ã®éš£æ¥ãƒãƒ¼ãƒ‰ã®ã©ã‚Œã‹1ã¤ã‚’é¸æŠã—ã¦ã€éš£æ¥ãƒãƒ¼ãƒ‰ãŒãªããªã‚‹ã¾ã§ç¹°ã‚Šè¿”ã—ã¦æ¢ç´¢ã™ã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§ã™ã€‚


![](https://storage.googleapis.com/zenn-user-upload/afb16b53fca5-20230505.gif)
DFSãƒ¡ãƒ³ã‚¿ãƒ«ãƒ¢ãƒ‡ãƒ«ï¼ˆ[å‡ºå…¸](https://commons.wikimedia.org/wiki/File:Depth-First-Search.gif)ï¼‰


ã“ã“ã§ç†è§£ã®ãŸã‚ã«ã¾ãšã¯äºŒåˆ†æœ¨ã®æ¢ç´¢ã‹ã‚‰è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

## äºŒåˆ†æœ¨ã®æ¢ç´¢

äºŒåˆ†æœ¨ã®DFSæ¢ç´¢ã«ã¯ã€pre-order, in-order, post-orderã®æ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚ãã‚Œãã‚Œã€ãƒãƒ¼ãƒ‰ã«å…¥ã£ãŸã¨ãã€ãƒãƒ¼ãƒ‰ã®å·¦æãŒçµ‚ã‚ã£ã¦å³æã«å…¥ã‚‹å‰ã€ãƒãƒ¼ãƒ‰ã®å·¦æã¨å³æãŒçµ‚ã‚ã£ã¦ãƒãƒ¼ãƒ‰ã‹ã‚‰é›¢ã‚Œã‚‹ã¨ãã€ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã¨å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚Nåˆ†æœ¨ã«ã¯in-orderãŒãªã„ãŸã‚ï¼ˆæãŒ2ã¤ä»¥ä¸Šã‚ã‚‹ãŸã‚ï¼‰ã€æ±ç”¨æ€§ã§è¨€ãˆã°ã€pre-orderã¨post-orderãŒç”¨ã„ã‚‰ã‚Œã¾ã™ã€‚

post-orderã®æ–¹ã¯ã€å·¦æã‚’å„ªå…ˆã«æ¢ç´¢ã—ã€æ¬¡ã«å³æã€æœ€å¾Œã¯ãƒãƒ¼ãƒ‰è‡ªèº«ã¨ãªã‚‹ã®ã§ã€DFSã®å®Ÿä¾‹ã§ã‚‚ã‚ã‚Šã¾ã™ã€‚DFSã¯ç©ºé–“åŠ¹ç‡ãŒé«˜ã„ã®ã§ã™ãŒã€å†å¸°ã®å½¢ã§ã‚¹ã‚¿ãƒƒã‚¯ã«ç©ã‚“ã§è¡Œãã¾ã™ã€‚ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆçš„ãªè€ƒãˆæ–¹ã‚’jsã‚³ãƒ¼ãƒ‰ã§è¡¨ç¾ã™ã‚‹ã¨ä»¥ä¸‹ã¨ãªã‚Šã¾ã™ã€‚å†å¸°ã«ã¤ã„ã¦ã‚ã¾ã‚Šç†è§£ã—ã¦ã„ãªã„ã¨ã“ã“ã¯è‹¦ã—ã‚€ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€åŸå‰‡ã¨ã—ã¦ã€**ç¾æ™‚ç‚¹ã®ãƒãƒ¼ãƒ‰ã«ãŠã„ã¦ä½•ã‚’ã™ã‚‹ã‹ã ã‘ã‚’è€ƒãˆã‚‹**ã®ã§ã™ã€‚

```js
// äºŒåˆ†æœ¨
class Node {
  constructor(val = 0, left = null, right = null) {
    this.val = val
    this.left = left
    this.right = right
  }
}
function dfs(node) {
  if (node === null) return
  // preorderã€€ã“ã®æ™‚ç‚¹ã§ã¾ã æã®ãƒˆãƒ©ãƒãƒ¼ã‚¹ãŒå§‹ã¾ã£ã¦ã„ãªãã€nodeè‡ªèº«ã«ã‚ã‚‹
  //-----
  dfs(node.left)
  //-----
  // inorderã€€ã“ã®æ™‚ç‚¹ã§å·¦ãŒçµ‚ã‚ã£ãŸãŒå³ã¯ã¾ã ã€ä»Šã¯nodeè‡ªèº«ã«ã‚ã‚‹
  //-----
  dfs(node.right)
  //-----
  // postorderã€€ã“ã®æ™‚ç‚¹ã§å³ã¨å·¦ã®æã®ãƒˆãƒ©ãƒãƒ¼ã‚¹ãŒçµ‚ã‚ã£ãŸãŸã‚ã€ãã®çµæœã‚’æŒã£ã¦ä½•ã‹ã®æ“ä½œãŒå¯èƒ½
}

// Nåˆ†æœ¨
class Node {
  constructor(val = 0, children = []) {
    this.val = val
    this.children = children
  }
}
function dfs(node) {
  if (node === null) return
  // preorderã€€ã“ã®æ™‚ç‚¹ã§ã¾ã æã®ãƒˆãƒ©ãƒãƒ¼ã‚¹ãŒå§‹ã¾ã£ã¦ã„ãªãã€nodeè‡ªèº«ã«ã‚ã‚‹
  //-----
  for (const child of node.children) {
    dfs(child)
  }
  //-----
  // postorderã€€ã“ã®æ™‚ç‚¹ã§å­ä¾›ãƒãƒ¼ãƒ‰ã®ãƒˆãƒ©ãƒãƒ¼ã‚¹ãŒçµ‚ã‚ã£ãŸãŸã‚ã€ãã®çµæœã‚’æŒã£ã¦ä½•ã‹ã®æ“ä½œãŒå¯èƒ½
}
```

DFSã®æ·±ã•å„ªå…ˆã«å¯¾ã—ã¦ã€BFSã®å¹…å„ªå…ˆæ¢ç´¢æ–¹æ³•ã‚‚ã‚ã‚Šã¾ã™ãŒã€å†å¸°ã‚’åˆ©ç”¨ã—ã¦ãŠã‚‰ãšã€å¤šå°‘ç†è§£ã—ã‚„ã™ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚è€ƒãˆæ–¹ã¨ã—ã¦ã¯ã€ä»»æ„ã®ãƒãƒ¼ãƒ‰ã«ãŠã„ã¦ã€ãã®ãƒãƒ¼ãƒ‰ã®å­ä¾›ãƒãƒ¼ãƒ‰ã‚’ä¸€ã¤ã®ã‚­ãƒ¥ãƒ¼ã«å…¥ã‚Œã¦ã€ã‚­ãƒ¥ãƒ¼ãŒç©ºã«ãªã‚‹ã¾ã§å‡¦ç†ã‚’ç¶šã‘ã¾ã™ã€‚

```js
function bfs(root) {
  let queue = [root] // é…åˆ—ã§ã‚­ãƒ¥ãƒ¼ã‚’å®Ÿè£…
  let depth = 0 // bfsãŒåŒã˜éšå±¤ã®ã‚‚ã®ã‚’ä¸€åº¦å…¨éƒ¨è¨ªå•ã™ã‚‹ã®ã§ã€ã“ã“ã¯éšå±¤ã‚’è¨˜éŒ²
  while (queue.length > 0) { // ã‚­ãƒ¥ãƒ¼ã«ãƒãƒ¼ãƒ‰ãŒã‚ã‚‹é™ã‚Šå‡¦ç†ã‚’ç¶šã‘ã‚‹
    const n = queue.length 
    // ç¾åœ¨ã®ã‚­ãƒ¥ãƒ¼ã«ã‚ã‚‹ãƒãƒ¼ãƒ‰ã«å¯¾ã—ã¦ãƒ«ãƒ¼ãƒ—ã€ãŸã ã‚‚ã—depthã«é–¢å¿ƒãŒãªã„å ´åˆã“ã‚Œã¯ä¸è¦
    for (let i = 0; i < n; i++) { 
      const node = queue.shift() // ã‚­ãƒ¥ãƒ¼ã®å…ˆé ­ã‹ã‚‰ãƒãƒ¼ãƒ‰ã‚’å–ã‚Šå‡ºã™
      for (const child of node.children) { // ãƒãƒ¼ãƒ‰ã®éš£æ¥ãƒãƒ¼ãƒ‰ã‚’ãƒ«ãƒ¼ãƒ—
        // ã“ã“ã§ä½•ã‹å‡¦ç†ã‚’è¡Œã†ã€ä¾‹ãˆã°ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒãƒ¼ãƒ‰ã§ã‚ã‚Œã°ãƒªã‚¿ãƒ¼ãƒ³
        if (isTarget(child)) return child
        queue.push(child) // ãƒãƒ¼ãƒ‰ã‚’ã‚­ãƒ¥ãƒ¼ã«ãƒ—ãƒƒã‚·ãƒ¥
      }
    }
    // ã“ã“ã§éšå±¤ã‚’1ã¤å¢—ã‚„ã™
    depth++
  }
}
```


## ã‚°ãƒ©ãƒ•ã¾ã§æ‹¡å¼µ

æœ¨ã¨ã‚°ãƒ©ãƒ•ã¯ã©ã¡ã‚‰ã‹ã¨ã„ã†ã¨ã‹ãªã‚Šè¿‘ã„ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã«ãªã‚Šã¾ã™ã€‚ä¸€ç•ªå¤§ããªåŒºåˆ¥ã¨ã„ã†ã¨ã€æœ¨ã«ã¯ã‚µã‚¤ã‚¯ãƒ«ãŒå­˜åœ¨ã—ãªã„ãŒã€**ã‚°ãƒ©ãƒ•ã«ã¯ã‚µã‚¤ã‚¯ãƒ«ãŒå­˜åœ¨**ã™ã‚‹ï¼ˆã“ã¨ãŒã§ãã‚‹ï¼‰ã¨ã“ã‚ã§ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/31ded6e089fc-20220702.png)

ã“ã®é•ã„ã«ã‚ˆã‚Šã€ã‚°ãƒ©ãƒ•ã‚’æ¢ç´¢ã™ã‚‹ã¨ãã«ä¸€ã¤å•é¡ŒãŒç”Ÿã˜ã¾ã™ã€‚è¨ªå•æ¸ˆã¿ã®ãƒãƒ¼ãƒ‰ã«æˆ»ã£ã¦ã—ã¾ã„ã€ç„¡é™ãƒ«ãƒ¼ãƒ—ã«ãªã‚‹å•é¡ŒãŒã‚ã‚‹ã¨ã“ã‚ã§ã™ã€‚ã“ã®å•é¡Œã‚’è§£æ±ºã™ã‚‹ã«ã¯ã€é€šå¸¸ãƒãƒƒã‚·ãƒ¥ã‚»ãƒƒãƒˆã‚’å°å…¥ã—ã¦ã€è¨ªå•æ¸ˆã¿ã®ãƒãƒ¼ãƒ‰ã‚’è¨˜éŒ²ã™ã‚‹ã“ã¨ã§ã™ã€‚

æœ¨ã®çŸ¥è¦‹ã‚’ã‚°ãƒ©ãƒ•ã«å¿œç”¨ã™ã‚‹ã¨ã€å³ã¨å·¦ã®æã¨ã¯é™ã‚‰ãšã€ä¸€èˆ¬çš„ã«ä»»æ„ã®ãƒãƒ¼ãƒ‰ã«å¯¾ã—ã¦ã€**éš£æ¥ãƒãƒ¼ãƒ‰**ã‚’é…åˆ—ã®å½¢ã§ä¿å­˜ã™ã‚‹ã¨è€ƒãˆã¦ã‚‚è‰¯ã„ã‹ã¨ã€‚ã¾ãŸã€ã‚°ãƒ©ãƒ•ã«ã‚µã‚¤ã‚¯ãƒ«ã®å­˜åœ¨ãŒã‚ã‚Šå¾—ã‚‹ãŸã‚ã€è¨ªå•æ¸ˆã¿ã‚’ãƒãƒ¼ã‚¯ã™ã‚‹ãŸã‚ã«ãƒãƒƒã‚·ãƒ¥ã‚»ãƒƒãƒˆãŒå¿…è¦ã€‚ãã‚Œä»¥å¤–ã«ã»ã¼åŒã˜ã‚ˆã†ã«è¦‹ãˆã¾ã™ã­ã€‚

```js
class Node {
  constructor(val = 0, neighbors = []) {
    this.val = val
    this.neighbors = neighbors
  }
}

// å†å¸°ã§æ›¸ã
function dfs(root, visited) {
  if (!root) return
  for (const neighbor of root.neighbors) { // ãƒãƒ¼ãƒ‰ã®éš£æ¥ãƒãƒ¼ãƒ‰ã‚’ãƒ«ãƒ¼ãƒ—
    if (visited.has(neighbor)) continue // è¨ªå•æ¸ˆã¿ã®å ´åˆã¯ã‚¹ã‚­ãƒƒãƒ—
    visited.add(neighbor) // è¨ªå•ã—ã¦ã„ãªã„å ´åˆã¯ãƒãƒƒã‚·ãƒ¥ã‚»ãƒƒãƒˆã«è¿½åŠ 
    dfs(neighbor, visited) // ãƒ«ãƒ¼ãƒ—ä¸­ã®ãƒãƒ¼ãƒ‰ã«å¯¾ã—ã¦å†å¸°å‘¼ã³å‡ºã—
  }
}

// ã‚¹ã‚¿ãƒƒã‚¯ã§æ›¸ã
function dfs(root) {
  const visited = new Set([root]) // ãƒãƒƒã‚·ãƒ¥ã‚»ãƒƒãƒˆã§è¨ªå•æ¸ˆã¿ã®ãƒãƒ¼ãƒ‰ã‚’è¿½åŠ 
  const stack = [root] // é…åˆ—ã§ã‚¹ã‚¿ãƒƒã‚¯ã‚’è¡¨ç¾

  while (stack.length > 0) { // ã‚¹ã‚¿ãƒƒã‚¯ã«ãƒãƒ¼ãƒ‰ãŒã‚ã‚‹é™ã‚Šå‡¦ç†ã‚’ç¶šã‘ã‚‹
    const currentNode = stack.pop() // ãƒãƒ¼ãƒ‰ã‚’ã‚¹ã‚¿ãƒƒã‚¯ã®ä¸Šã‹ã‚‰ã¨ã‚‹

    for (const neighbor of currentNode.neighbors) { // ãƒãƒ¼ãƒ‰ã®éš£æ¥ãƒãƒ¼ãƒ‰ã‚’ãƒ«ãƒ¼ãƒ—
      if (visited.has(neighbor)) continue // è¨ªå•æ¸ˆã¿ã®ãƒãƒ¼ãƒ‰ã¯ã‚¹ã‚­ãƒƒãƒ—
      // ã“ã®è¾ºã‚Šã§ä½•ã‹å‡¦ç†ã‚’è¡Œã†
      stack.push(neighbor)
      visited.add(neighbor)
    }
  }
}
```

ãã‚Œã§BFSã®è€ƒãˆæ–¹ã‚‚ä¸‹è¨˜ã®é€šã‚Šã§æ‹¡å¼µã™ã‚Œã°è‰¯ã„ã§ã—ã‚‡ã†ã€‚

```js
function bfs(root) {
  let queue = [root] // é…åˆ—ã§ã‚­ãƒ¥ãƒ¼ã‚’è¡¨ç¾
  let visited = new Set([root]) // ãƒãƒƒã‚·ãƒ¥ã‚»ãƒƒãƒˆã§è¨ªå•æ¸ˆã¿ã®ãƒãƒ¼ãƒ‰ã‚’è¿½åŠ 
  let depth = 0 // bfsãŒåŒã˜éšå±¤ã®ã‚‚ã®ã‚’ä¸€åº¦å…¨éƒ¨è¨ªå•ã™ã‚‹ã®ã§ã€ã“ã“ã¯éšå±¤ã‚’è¨˜éŒ²
  while (queue.length > 0) { // ã‚­ãƒ¥ãƒ¼ã«ãƒãƒ¼ãƒ‰ãŒã‚ã‚‹é™ã‚Šå‡¦ç†ã‚’ç¶šã‘ã‚‹
    const n = queue.length 
    // ç¾åœ¨ã®ã‚­ãƒ¥ãƒ¼ã«ã‚ã‚‹ãƒãƒ¼ãƒ‰ã«å¯¾ã—ã¦ãƒ«ãƒ¼ãƒ—ã€ãŸã ã‚‚ã—depthã«é–¢å¿ƒãŒãªã„å ´åˆã“ã‚Œã¯ä¸è¦
    for (let i = 0; i < n; i++) { 
      const currentNode = queue.shift() // ã‚­ãƒ¥ãƒ¼ã®å…ˆé ­ã‹ã‚‰ãƒãƒ¼ãƒ‰ã‚’å–ã‚Šå‡ºã™
      for (const neighbor of currentNode.neighbors) { // ãƒãƒ¼ãƒ‰ã®éš£æ¥ãƒãƒ¼ãƒ‰ã‚’ãƒ«ãƒ¼ãƒ—
        if (visited.has(neighbor)) continue // è¨ªå•æ¸ˆã¿ã®ãƒãƒ¼ãƒ‰ã¯ã‚¹ã‚­ãƒƒãƒ—
        // ã“ã®è¾ºã‚Šã§ä½•ã‹å‡¦ç†ã‚’è¡Œã†
        queue.push(neighbor) // è¨ªå•ã—ã¦ã„ãªã„ãƒãƒ¼ãƒ‰ã‚’ã‚­ãƒ¥ãƒ¼ã«ãƒ—ãƒƒã‚·ãƒ¥
        visited.add(neighbor) // åŒæ™‚ã«è¨ªå•æ¸ˆã¿ã¨ãƒãƒ¼ã‚¯
      }
    }
    // ã“ã“ã§éšå±¤ã‚’1ã¤å¢—ã‚„ã™
    depth++;
  }
}
```

## DFSã¨BFSã®æ¯”è¼ƒ

ä¸€èˆ¬çš„ã«è¨€ãˆã°ï¼š

- bfsã¯éšå±¤æ¯ã«é€²ã‚ã‚‹ã®ã§ã€ãƒãƒ¼ãƒ‰ã®é–“ã®è·é›¢ã¯å¸¸ã«æœ€çŸ­ã€ãŸã ã‚­ãƒ¥ãƒ¼ã¨ã‹ãƒãƒƒã‚·ãƒ¥ã‚»ãƒƒãƒˆã¨ã‹ãŒã‚ã‚‹ãŸã‚ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ãŒdfsã‚ˆã‚Šé«˜ã„ã€‚
- dfsã¯åŠ¹ç‡çš„ã«é ãã«ã‚ã‚‹ãƒãƒ¼ãƒ‰ã‚’è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã‚‹ã€ã¤ã¾ã‚Šæ·±ã•ã¨é–¢ã‚ã‚‹å•é¡Œã«é©ã—ã¦ã„ã‚‹ã€‚æœ€çŸ­ã‚‚æ±‚ã‚ã‚‰ã‚Œã¾ã™ãŒã€å…¨ã¦ã®å›ç­”ã‚’è¦‹ã¤ã‘ã¦ãã®ä¸­ã‹ã‚‰ã¾ãŸæœ€çŸ­ã‚’çµã‚Šå‡ºã™ã“ã¨ã«ãªã‚Šã€åŠ¹ç‡ãŒbfsã‚ˆã‚Šè‰¯ããªã„

ã¤ã¾ã‚Šï¼š

| ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ        | é©ã—ã¦ã„ã‚‹å ´é¢                                                 | è‰¯ã„ç‚¹                                                 | æ‚ªã„ç‚¹                                                     |
| ------------------ | -------------------------------------------------------------- | ------------------------------------------------------ | ---------------------------------------------------------- |
| BFS (å¹…å„ªå…ˆæ¢ç´¢)   | æœ€çŸ­çµŒè·¯ã‚’è¦‹ã¤ã‘ã‚‹ã€å…¨ãƒãƒ¼ãƒ‰ã‚’åŒã˜éšå±¤ã§æ¢ç´¢ã™ã‚‹               | æœ€çŸ­çµŒè·¯ã‚’è¦‹ã¤ã‘ã‚‹ã®ã«é©ã—ã¦ã„ã‚‹ã€å…¨ãƒãƒ¼ãƒ‰ã‚’å‡ç­‰ã«æ¢ç´¢ | ç©ºé–“åŠ¹ç‡ãŒä½ã„ï¼ˆã‚­ãƒ¥ãƒ¼ã«å¤šãã®ãƒãƒ¼ãƒ‰ã‚’æ ¼ç´ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ï¼‰ |
| DFS (æ·±ã•å„ªå…ˆæ¢ç´¢) | ã‚°ãƒ©ãƒ•ã®å…¨æ¢ç´¢ã€å¾ªç’°ã‚’æ¤œå‡ºã™ã‚‹ã€ãƒˆãƒãƒ­ã‚¸ã‚«ãƒ«ã‚½ãƒ¼ãƒˆã‚’æ±‚ã‚ã‚‹ãªã© | ç©ºé–“åŠ¹ç‡ãŒé«˜ã„ï¼ˆã‚¹ã‚¿ãƒƒã‚¯ã‚’ä½¿ç”¨ï¼‰ã€æ¢ç´¢ãŒæ·±ãè¡Œã‚ã‚Œã‚‹   | æœ€çŸ­çµŒè·¯ã‚’è¦‹ã¤ã‘ã‚‹ã®ã«é©ã—ã¦ã„ãªã„ã€æ¢ç´¢ãŒåã‚‹å ´åˆãŒã‚ã‚‹   |


dfsã¯ã‚¹ã‚¿ãƒƒã‚¯ï¼‹å†å¸°ã€bfsã¯ã‚­ãƒ¥ãƒ¼ï¼‹whileãƒ«ãƒ¼ãƒ—ã¨ã„ã†ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã€‚[è¡¨](https://iq.opengenus.org/dfs-vs-bfs/)ã«ã¾ã¨ã‚ã‚‹ã¨ï¼š

| é …ç›®           | DFS          | BFS            |
| -------------- | ------------ | -------------- |
| ãƒˆãƒ©ãƒãƒ¼ã‚¹é †ç•ª | æ·±ã•ãƒ»Depth  | å¹…ãƒ»Level      |
| ãƒ‡ãƒ¼ã‚¿æ§‹é€      | ã‚¹ã‚¿ãƒƒã‚¯     | ã‚­ãƒ¥ãƒ¼         |
| æ™‚é–“è¤‡é›‘åº¦     | O(V + E)     | O(V + E)       |
| ç©ºé–“è¤‡é›‘åº¦     | O(V)         | O(V)           |
| ãƒ«ãƒ¼ãƒˆç‰¹å¾´     | ç‹­ã„ã‹ã¤é•·ã„ | å¹…åºƒã„ã‹ã¤çŸ­ã„ |

## å®Ÿè·µå•é¡Œ

ã“ã“ã§Leetcodeã®1971. Find if Path Exists in Graphã§ä¾‹ã¨ã—ã¾ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/1fea899e4644-20230505.png)

ã©ã®æ¢ç´¢æ–¹æ³•ã§ã‚‚ã„ã‘ã¾ã™ãŒã€è¦ã™ã‚‹ã«ã€ãƒãƒ¼ãƒ‰srcã‹ã‚‰ã‚¹ã‚¿ãƒ¼ãƒˆã—ã¦ã€ãƒãƒ¼ãƒ‰dstã¾ã§åˆ°é”ã§ãã‚‹ã‹ã©ã†ã‹ã‚’åˆ¤æ–­ã™ã‚Œã°è‰¯ã„ã“ã¨ã§ã™ã€‚

### BFSæ–¹æ³•

```js
class Node {
  constructor(val, neighbors = []) {
    this.val = val;
    this.neighbors = neighbors;
  }
}

class Graph {
  constructor(n) {
    this.nodes = Array.from({ length: n }, (_, i) => new Node(i));
  }

  addEdge(src, dst) {
    this.nodes[src].neighbors.push(dst);
    this.nodes[dst].neighbors.push(src);
  }

  buildFromEdges(edges) {
    for (const [src, dst] of edges) {
      this.addEdge(src, dst);
    }
    return this;
  }

  findPath(src, dst) {
    const visited = new Set([src]);
    const queue = [src];

    while (queue.length > 0) {
      const current = queue.shift();
      if (current === dst) {
        return true;
      } else {
        for (const neighbor of this.nodes[current].neighbors) {
          if (!visited.has(neighbor)) {
            visited.add(neighbor);
            queue.push(neighbor);
          }
        }
      }
    }
    return false;
  }
}

function validPath(n, edges, source, destination) {
  return new Graph(n)
    .buildFromEdges(edges)
    .findPath(source, destination);
}
```

### DFSæ–¹æ³•

ã»ã¼ä¸€ç·’ã§ã™ãŒã€ã‚¹ã‚¿ãƒƒã‚¯ãªã®ã§`shift`ã§ã¯ãªã`pop`ã«å¤‰ãˆã‚‹ã ã‘ã§ã™ã€‚

```js
// ...
  findPath(src, dst) {
    const visited = new Set([src]);
    const stack = [src];

    while (stack.length > 0) {
      const current = stack.pop(); // ã“ã“ã ã‘é•ã†
      if (current === dst) {
        return true;
      } else {
        for (const neighbor of this.nodes[current].neighbors) {
          if (!visited.has(neighbor)) {
            visited.add(neighbor);
            stack.push(neighbor);
          }
        }
      }
    }
    return false;
  }
```

å†å¸°ã§æ›¸ãå ´åˆã¯ï¼š

```js
// ...
  dfs(current, dst, visited) {
    if (current === dst) {
      return true;
    }
    visited.add(current);
    for (const neighbor of this.nodes[current].neighbors) {
      if (!visited.has(neighbor)) {
        if (this.dfs(neighbor, dst, visited)) {
          return true;
        }
      }
    }
    return false;
  }

  findPath(src, dst) {
    const visited = new Set();
    return this.dfs(src, dst, visited);
  }
```

BFSã¨DFSæ¢ç´¢ã¯éå¸¸ã«é‡è¦ãªåŸºç¤ãªã®ã§ã€ç›®ã‚’é–‰ã˜ã¦ã‚‚æ›¸ã‘ã‚‹ã‚ˆã†ã«ãªã‚ŠãŸã„ã»ã©ã§ã™ã€‚ä»–ã®ç·´ç¿’å•é¡Œã¯ä¸‹è¨˜ã®ã‚ˆã†ã«ä¸Šã’ã¾ã—ãŸã€‚

- [797. All Paths From Source to Target](https://leetcode.com/problems/all-paths-from-source-to-target/description/)
- [133. Clone Graph](https://leetcode.com/problems/clone-graph/description/)
- [332. Reconstruct Itinerary](https://leetcode.com/problems/reconstruct-itinerary/description/)
- [1091. Shortest Path in Binary Matrix](https://leetcode.com/problems/shortest-path-in-binary-matrix/description/)
- [994. Rotting Oranges](https://leetcode.com/problems/rotting-oranges/description/)

## çµ‚ã‚ã‚Šã«

ä»Šå›ã¯ã‚°ãƒ©ãƒ•ã®æ¢ç´¢ã«ã¤ã„ã¦ã€æœ¨ã¨æ¯”è¼ƒã—ãªãŒã‚‰ã¾ã¨ã‚ã¾ã—ãŸã€‚æ¬¡å›ã¯`Union-Find`ã«ã¤ã„ã¦æ›¸ãã¾ã™ã€‚